(()=>{var e={387:(e,t,i)=>{const n=i(646);function s(e,t){const i=r(e)-r(t);return{time:i,text:o(i)}}function r(e){if(NaN===parseInt(e.charAt(0))&&(e=e.slice(1)),(e=e.split(":").reverse()).length<=0||e.length>3)throw new Error("convertTimeToSeconds: Unrecognized time string!");return e.reduce(((e,t,i)=>e+t*Math.pow(60,i)*1e3),0)}function o(e){const t=e<0?"-":"";let i=0,n=0,s=Math.abs(Math.floor(e/1e3));return e=Math.abs(e%1e3/10),s>=3600&&(i=Math.floor(s/3600),s-=60*i*60,i=i<10?"0"+i:i),s>=60&&(n=Math.floor(s/60),s-=60*n,n=i&&n<10?"0"+n:n),s<10&&(s="0"+s),e<10&&(e="0"+e),`${t}${i?i+":":""}${i||n?n+":":""}${s}.${e}`}e.exports=e=>{const t=e.Replicant("livesplit"),i=new n(`${e.bundleConfig.url}:${e.bundleConfig.port}`);let r,o;async function c(){let n;try{n=await i.getAll()}catch(t){return void e.log.error(t)}const r=function(e,t){const i={};if(!e||!e.currentTime||!t.currentTime)return i.error=!0,i;if(s(t.currentTime,e.currentTime)<0)return i.error=!0,i.skipUpdate=!0,i;if(i.isComplete=t.splitIndex>0&&parseInt(t.splitIndex)>e.splitIndex&&"0.00"!==t.previousSplitTime,"0.00"===e.previousSplitTime&&e.splitIndex>0&&(i.isComplete=!1),i.isComplete){if(i.duration=s(t.previousSplitTime,e.previousSplitTime||"0"),0===i.duration.time)return i.error=!0,i.skipUpdate=!0,i;i.isGold=s(t.bestPossibleTime,e.bestPossibleTime).time<0}else parseInt(t.splitIndex)<e.splitIndex?i.isUndone=!0:i.duration=s(t.currentTime,e.previousSplitTime||"0");return i}(t.value.timer,n);r.error?r.skipUpdate||(t.value.timer=n):(t.value.timer=n,r.isComplete?e.sendMessage("split",r):r.isUndone&&e.sendMessage("undoSplit",r))}t.value.connection.status="disconnected",t.value.timer=void 0,i.timeout=30,i.on("connected",(()=>{e.log.info("Connected to ls"),t.value.connection.status="connected",r=setInterval(c,15)})),i.on("disconnected",(()=>{e.log.info("Disconnected from ls"),t.value.connection.status="disconnected",t.value.timer=void 0})),i.on("error",(t=>{e.log.error(t)})),e.listenFor("connect",(async(n,s)=>{if("connected"!==t.value.connection.status){try{await i.connect()}catch(t){return e.log.info("there was an error with the promise"),void s(new Error("Could not connect to LiveSplit. Is the LiveSplit Server running?",t))}s(null)}else s(null)})),e.listenFor("disconnect",((e,n)=>{if("disconnected"!==t.value.connection.status){try{clearInterval(r),i.disconnect()}catch(e){n(new Error("Could not disconnect from LiveSplit.",e))}n(null)}else n(null)})),o=setInterval((()=>{e.sendMessage("changeInfoDisplay")}),4e3)}},646:(e,t,i)=>{e.exports=i(149)},149:(e,t,i)=>{const n=i(808),s=i(361),{deprecate:r}=i(837),o=i(113);e.exports=class extends s{constructor(e){if(super(),"string"!=typeof e)throw new TypeError("Invalid argument type! IP:PORT expected.");if(2!==(e=e.split(":")).length)throw new Error("Failed to parse connection details! IP:PORT expected.");return this._connectionDetails={ip:e[0],port:parseInt(e[1])},this._connected=!1,this.timeout=100,this._openRequests={},this._initGameTimeOnce=!1,this.getPreviousSplitname=r(this.getPreviousSplitname,'Method "getPreviousSplitname" is deprecated! Please, use "getPreviousSplitName" (capital letter "N") instead.'),this}connect(){return this._socket=new n.Socket,new Promise(((e,t)=>{this._socket.connect(this._connectionDetails.port,this._connectionDetails.ip,(()=>{this._connected=!0,this.emit("connected"),e(this._connected)})),this._socket.on("data",(e=>{e.toString("utf-8").split("\r\n").slice(0,-1).forEach((e=>{this.emit("data",JSON.parse(e))}))})),this._socket.on("error",(e=>{this.emit("error",e),t(e)})),this._socket.on("close",(()=>{this._connected=!1,this.emit("disconnected")}))}))}disconnect(){return!!this._connected&&(this._socket.destroy(),this._connected=!1,!0)}get connected(){return this._connected}send(e,t){if(!this._connected)throw new Error("Client must be connected to the server!");if("string"!=typeof e)throw new Error("String expected!");this._checkDisallowedSymbols(e);const i=o.randomUUID(),n={command:e,data:t,nonce:i};return this._socket.write(`${JSON.stringify(n)}\r\n`),this._openRequests[i]=n,this._waitForResponse(n)}_waitForResponse(e){let t=!1;const i=new Promise((i=>{t=n=>{n.nonce===e.nonce&&(this.off("data",t),delete this._openRequests[e.nonce],i(n))},this.on("data",t)})),n=new Promise((i=>{setTimeout((()=>{this.off("data",t),delete this._openRequests[e.nonce],i(null)}),this.timeout)}));return Promise.race([i,n])}_checkDisallowedSymbols(e){if(-1!==e.indexOf("\r\n"))throw new Error("No newline symbols allowed!");return!0}startTimer(){return this.send("starttimer")}startOrSplit(){return this.send("startorsplit")}split(){return this.send("split")}unsplit(){return this.send("unsplit")}skipSplit(){return this.send("skipsplit")}pause(){return this.send("pause")}resume(){return this.send("resume")}reset(){return this.send("reset")}initGameTime(){return!this._initGameTimeOnce&&(this._initGameTimeOnce=!0,this.send("initgametime"))}setGameTime(e){return this.send("setgametime",{time:e})}setLoadingTimes(e){return this.send("setloadingtimes",{time:e})}pauseGameTime(){return this.send("pausegametime")}unpauseGameTime(){return this.send("unpausegametime")}setComparison(e){return this.send("setcomparison",{comparison:e})}getDelta(e=""){return this.send("getdelta",{comparison:e})}getLastSplitTime(){return this.send("getlastsplittime")}getComparisonSplitTime(){return this.send("getcomparisonsplittime")}getCurrentTime(){return this.send("getcurrenttime")}getFinalTime(e=""){return this.send("getfinaltime",{comparison:e})}getPredictedTime(e=""){return this.send("getpredictedtime",{comparison:e})}getBestPossibleTime(){return this.send("getbestpossibletime")}getSplitIndex(){return this.send("getsplitindex")}getCurrentSplitName(){return this.send("getcurrentsplitname")}getPreviousSplitName(){return this.send("getprevioussplitname")}getPreviousSplitname(){return this.getPreviousSplitName()}getCurrentTimerPhase(){return this.send("getcurrenttimerphase")}async getAll(){const e={};for(let t of["getCurrentTimerPhase","getDelta","getLastSplitTime","getComparisonSplitTime","getCurrentTime","getFinalTime","getPredictedTime","getBestPossibleTime","getSplitIndex","getCurrentSplitName","getPreviousSplitName"]){let i=await this[t]();Object.assign(e,i.data)}return e}}},113:e=>{"use strict";e.exports=require("crypto")},361:e=>{"use strict";e.exports=require("events")},808:e=>{"use strict";e.exports=require("net")},837:e=>{"use strict";e.exports=require("util")}},t={},i=function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}(387);module.exports=i})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxnQkFDSSxPQUFPM0QsS0FBS3FCLEtBQUssaUJBT3JCdUMsc0JBQ0ksT0FBTzVELEtBQUtxQixLQUFLLHVCQU9yQndDLHVCQUNJLE9BQU83RCxLQUFLcUIsS0FBSyx3QkFHckJmLHVCQUNJLE9BQU9OLEtBQUs2RCx1QkFPaEJDLHVCQUNJLE9BQU85RCxLQUFLcUIsS0FBSyx3QkFPckJsRSxlQUNHLE1BQU00RyxFQUFTLEdBRWQsSUFBSyxJQUFJQyxJQUFVLENBQUMsdUJBQXdCLFdBQVksbUJBQW9CLHlCQUEwQixpQkFBa0IsZUFBZ0IsbUJBQW9CLHNCQUF1QixnQkFBaUIsc0JBQXVCLHdCQUF5QixDQUNoUCxJQUFJQyxRQUFpQmpFLEtBQUtnRSxLQUMxQkUsT0FBT0MsT0FBT0osRUFBUUUsRUFBU3BELE1BR25DLE9BQU9rRCxLLHFCQzFYZnZILEVBQU9DLFFBQVUySCxRQUFRLFcscUJDQXpCNUgsRUFBT0MsUUFBVTJILFFBQVEsVyxxQkNBekI1SCxFQUFPQyxRQUFVMkgsUUFBUSxRLHFCQ0F6QjVILEVBQU9DLFFBQVUySCxRQUFRLFVDQ3JCQyxFQUEyQixHQ0UzQkMsRURDSixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUosRUFBeUJHLEdBQzVDLFFBQXFCNUYsSUFBakI2RixFQUNILE9BQU9BLEVBQWFoSSxRQUdyQixJQUFJRCxFQUFTNkgsRUFBeUJHLEdBQVksQ0FHakQvSCxRQUFTLElBT1YsT0FIQWlJLEVBQW9CRixHQUFVaEksRUFBUUEsRUFBT0MsUUFBUzhILEdBRy9DL0gsRUFBT0MsUUNsQlc4SCxDQUFvQixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbGl2ZXNwbGl0Ly4vc3JjL2V4dGVuc2lvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly9saXZlc3BsaXQvLi4vLi4vLi4vbm9kZS1saXZlc3BsaXQtY2xpZW50L2NsaWVudC5qcyIsIndlYnBhY2s6Ly9saXZlc3BsaXQvLi4vLi4vLi4vbm9kZS1saXZlc3BsaXQtY2xpZW50L3NyYy9MaXZlU3BsaXRDbGllbnQuanMiLCJ3ZWJwYWNrOi8vbGl2ZXNwbGl0L2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJjcnlwdG9cIiIsIndlYnBhY2s6Ly9saXZlc3BsaXQvZXh0ZXJuYWwgbm9kZS1jb21tb25qcyBcImV2ZW50c1wiIiwid2VicGFjazovL2xpdmVzcGxpdC9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwibmV0XCIiLCJ3ZWJwYWNrOi8vbGl2ZXNwbGl0L2V4dGVybmFsIG5vZGUtY29tbW9uanMgXCJ1dGlsXCIiLCJ3ZWJwYWNrOi8vbGl2ZXNwbGl0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2xpdmVzcGxpdC93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTm9kZUNHIFJFQUxMWSBkb2Vzbid0IGxpa2UgaXQgaWYgeW91IHVzZSBFU00gc3ludGF4IGluIGV4dGVuc2lvbnNcbmNvbnN0IExpdmVTcGxpdENsaWVudCA9IHJlcXVpcmUoJ2xpdmVzcGxpdC1jbGllbnQnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5vZGVjZyA9PiB7XG5cdGNvbnN0IHJMaXZlc3BsaXQgPSBub2RlY2cuUmVwbGljYW50KCdsaXZlc3BsaXQnKVxuXHRjb25zdCBjbGllbnQgPSBuZXcgTGl2ZVNwbGl0Q2xpZW50KGAke25vZGVjZy5idW5kbGVDb25maWcudXJsfToke25vZGVjZy5idW5kbGVDb25maWcucG9ydH1gKVxuXHRjb25zdCBwb2xsaW5nSW50ZXJ2YWwgPSAxNVxuXHRjb25zdCBpbmZvRGlzcGxheUNoYW5nZUludGVydmFsID0gNDAwMFxuXHRsZXQgdGltZXJIYW5kbGUsIGluZm9EaXNwbGF5Q2hhbmdlSGFuZGxlXG5cblx0Ly8gUmVzZXQgaW5mbyBzaW5jZSBjb25uZWN0aW9uIGhhcyBiZWVuIHJlc2V0XG5cdHJMaXZlc3BsaXQudmFsdWUuY29ubmVjdGlvbi5zdGF0dXMgPSAnZGlzY29ubmVjdGVkJ1xuXHRyTGl2ZXNwbGl0LnZhbHVlLnRpbWVyID0gdW5kZWZpbmVkXG5cblx0Y2xpZW50LnRpbWVvdXQgPSBwb2xsaW5nSW50ZXJ2YWwgKiAyXG5cdGNsaWVudC5vbignY29ubmVjdGVkJywgKCkgPT4ge1xuXHRcdG5vZGVjZy5sb2cuaW5mbygnQ29ubmVjdGVkIHRvIGxzJylcblx0XHRyTGl2ZXNwbGl0LnZhbHVlLmNvbm5lY3Rpb24uc3RhdHVzID0gJ2Nvbm5lY3RlZCdcblx0XHR0aW1lckhhbmRsZSA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCBwb2xsaW5nSW50ZXJ2YWwpXG5cdH0pXG5cblx0Y2xpZW50Lm9uKCdkaXNjb25uZWN0ZWQnLCAoKSA9PiB7XG5cdFx0bm9kZWNnLmxvZy5pbmZvKCdEaXNjb25uZWN0ZWQgZnJvbSBscycpXG5cdFx0ckxpdmVzcGxpdC52YWx1ZS5jb25uZWN0aW9uLnN0YXR1cyA9ICdkaXNjb25uZWN0ZWQnXG5cdFx0ckxpdmVzcGxpdC52YWx1ZS50aW1lciA9IHVuZGVmaW5lZFxuXHR9KVxuXG5cdC8vIFJlcXVpcmVkLCBldmVuIGlmIHRoZSBlcnJvciBpcyBiZWluZyBjYXVnaHQgZWxzZXdoZXJlLiBPdGhlcndpc2UgTm9kZUNHIHdpbGwgZXhpdCBvbiBzb2NrZXQgZXJyb3Jcblx0Y2xpZW50Lm9uKCdlcnJvcicsIChlcnIpID0+IHtcblx0XHRub2RlY2cubG9nLmVycm9yKGVycilcblx0fSlcblxuXHQvLyBNZXNzYWdlOiBjb25uZWN0XG5cdG5vZGVjZy5saXN0ZW5Gb3IoJ2Nvbm5lY3QnLCBhc3luYyAoXywgYWNrKSA9PiB7XG5cdFx0aWYgKHJMaXZlc3BsaXQudmFsdWUuY29ubmVjdGlvbi5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG5cdFx0XHRhY2sobnVsbClcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCBjbGllbnQuY29ubmVjdCgpXG5cdFx0fSBjYXRjaChlcnIpIHtcblx0XHRcdG5vZGVjZy5sb2cuaW5mbygndGhlcmUgd2FzIGFuIGVycm9yIHdpdGggdGhlIHByb21pc2UnKVxuXHRcdFx0YWNrKG5ldyBFcnJvcignQ291bGQgbm90IGNvbm5lY3QgdG8gTGl2ZVNwbGl0LiBJcyB0aGUgTGl2ZVNwbGl0IFNlcnZlciBydW5uaW5nPycsIGVycikpXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cblx0XHRhY2sobnVsbClcblx0fSlcblxuXHQvLyBNZXNzYWdlOiBkaXNjb25uZWN0XG5cdG5vZGVjZy5saXN0ZW5Gb3IoJ2Rpc2Nvbm5lY3QnLCAoXywgYWNrKSA9PiB7XG5cdFx0aWYgKHJMaXZlc3BsaXQudmFsdWUuY29ubmVjdGlvbi5zdGF0dXMgPT09ICdkaXNjb25uZWN0ZWQnKSB7XG5cdFx0XHRhY2sobnVsbClcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRpbWVySGFuZGxlKVxuXHRcdFx0Y2xpZW50LmRpc2Nvbm5lY3QoKVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0YWNrKG5ldyBFcnJvcignQ291bGQgbm90IGRpc2Nvbm5lY3QgZnJvbSBMaXZlU3BsaXQuJywgZXJyKSlcblx0XHR9XG5cblx0XHRhY2sobnVsbClcblx0fSlcblxuXHQvLyBNZXNzYWdlOiBjaGFuZ2VJbmZvRGlzcGxheVxuXHRpbmZvRGlzcGxheUNoYW5nZUhhbmRsZSA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRub2RlY2cuc2VuZE1lc3NhZ2UoJ2NoYW5nZUluZm9EaXNwbGF5Jylcblx0fSwgaW5mb0Rpc3BsYXlDaGFuZ2VJbnRlcnZhbClcblxuXHRhc3luYyBmdW5jdGlvbiB1cGRhdGVUaW1lcigpIHtcblx0XHRsZXQgbmV4dFxuXHRcdHRyeSB7XG5cdFx0XHRuZXh0ID0gYXdhaXQgY2xpZW50LmdldEFsbCgpXG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRub2RlY2cubG9nLmVycm9yKGVycilcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdGNvbnN0IHNlZ21lbnRJbmZvID0gZGV0ZWN0U3BsaXQockxpdmVzcGxpdC52YWx1ZS50aW1lciwgbmV4dClcblxuXHRcdC8vIFwiZXJyb3JcIiBpcyBzb21ld2hhdCBvZiBhIG1pc25vbWVyIGhlcmUuIFNvbWV0aW1lcyB1cGRhdGVzIGFyZSBoYW5kbGVkIG91dCBvZiBvcmRlci5cblx0XHQvLyBUaGlzIG1ha2VzIGl0IG11Y2ggaGFyZGVyIHRvIGRldGVjdCBzcGxpdHMsIHNvIHdlJ2xsIGluc3RlYWQgZGVmZXIgdGhlIHVwZGF0ZSBpbiB0aGVzZSBjYXNlcy5cblx0XHQvLyBTaW5jZSB3ZSBwb2xsIHNvIGZyZXF1ZW50bHksIHRoZSBkZWxheSBpbiBpbmZvcm1hdGlvbiB3aWxsIGJlIGlucGVyY2VwdGlibGUgYW55d2F5cy5cblx0XHQvLyBUaGlzIHByb3BlcnR5IGlzIGFsc28gdXNlZCBpbiBjYXNlcyB3aGVyZSB0aGUgdGltZXIgaXMgbm90IHJ1bm5pbmcuXG5cdFx0aWYgKHNlZ21lbnRJbmZvLmVycm9yKSB7XG5cdFx0XHRpZiAoIXNlZ21lbnRJbmZvLnNraXBVcGRhdGUpIHtcblx0XHRcdFx0ckxpdmVzcGxpdC52YWx1ZS50aW1lciA9IG5leHRcblx0XHRcdH1cblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdHJMaXZlc3BsaXQudmFsdWUudGltZXIgPSBuZXh0XG5cblx0XHRpZiAoc2VnbWVudEluZm8uaXNDb21wbGV0ZSkge1xuXHRcdFx0bm9kZWNnLnNlbmRNZXNzYWdlKCdzcGxpdCcsIHNlZ21lbnRJbmZvKVxuXHRcdH0gZWxzZSBpZiAoc2VnbWVudEluZm8uaXNVbmRvbmUpIHtcblx0XHRcdG5vZGVjZy5zZW5kTWVzc2FnZSgndW5kb1NwbGl0Jywgc2VnbWVudEluZm8pXG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGRldGVjdFNwbGl0KHByZXZUaW1lLCBuZXh0VGltZSkge1xuXHRjb25zdCBzZWdtZW50ID0ge31cblx0aWYgKCFwcmV2VGltZSB8fFxuXHRcdCFwcmV2VGltZS5jdXJyZW50VGltZSB8fFxuXHRcdCFuZXh0VGltZS5jdXJyZW50VGltZSkge1xuXHRcdHNlZ21lbnQuZXJyb3IgPSB0cnVlXG5cdFx0cmV0dXJuIHNlZ21lbnRcblx0fVxuXG5cdC8vIERhdGEgcmVjZWl2ZWQgb3V0IG9mIG9yZGVyIGZyb20gc2VydmVyXG5cdGlmICh0aW1lRGlmZihuZXh0VGltZS5jdXJyZW50VGltZSwgcHJldlRpbWUuY3VycmVudFRpbWUpIDwgMCkge1xuXHRcdHNlZ21lbnQuZXJyb3IgPSB0cnVlXG5cdFx0c2VnbWVudC5za2lwVXBkYXRlID0gdHJ1ZVxuXHRcdHJldHVybiBzZWdtZW50XG5cdH1cblxuXHQvLyBEZXRlY3Qgc2VnbWVudCBlbmQgKHNwbGl0IGtleSBwcmVzc2VkLCBidXQgbm90IHNraXAga2V5KVxuXHRzZWdtZW50LmlzQ29tcGxldGUgPSBuZXh0VGltZS5zcGxpdEluZGV4ID4gMCAmJiBwYXJzZUludChuZXh0VGltZS5zcGxpdEluZGV4KSA+IHByZXZUaW1lLnNwbGl0SW5kZXggJiYgbmV4dFRpbWUucHJldmlvdXNTcGxpdFRpbWUgIT09ICcwLjAwJ1xuXG5cdC8vIEZvciBub3csIHdlJ3JlIGp1c3Qgc2tpcHBpbmcgb3ZlciBzZWdtZW50cyB0aGF0IGluY2x1ZGUgYSBza2lwcGVkIHNwbGl0IChpLmUuIG11bHRpcGxlIHNlZ21lbnRzIGluIGEgc2luZ2xlIFwic3BsaXRcIiBldmVudCkuXG5cdC8vIFRPRE86IEZpbmQgYSBiZXR0ZXIgc29sdXRpb24gZm9yIHRoaXM/IE1pZ2h0IHJlcXVpcmUgYSBMaXZlc3BsaXQuU2VydmVyIGNoYW5uZ2Vcblx0aWYgKHByZXZUaW1lLnByZXZpb3VzU3BsaXRUaW1lID09PSAnMC4wMCcgJiYgcHJldlRpbWUuc3BsaXRJbmRleCA+IDApIHtcblx0XHRzZWdtZW50LmlzQ29tcGxldGUgPSBmYWxzZVxuXHR9XG5cblx0aWYgKHNlZ21lbnQuaXNDb21wbGV0ZSkge1xuXHRcdHNlZ21lbnQuZHVyYXRpb24gPSB0aW1lRGlmZihuZXh0VGltZS5wcmV2aW91c1NwbGl0VGltZSwgcHJldlRpbWUucHJldmlvdXNTcGxpdFRpbWUgfHwgJzAnKVxuXG5cdFx0Ly8gVE9ETzogUmVtb3ZlIHRoaXMgb25jZSBpbmZvcm1hdGlvbiBpcyByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgYWxsIGF0IG9uY2UuXG5cdFx0Ly8gU2luY2Ugd2UgcG9sbCB0aGUgc2VydmVyIGZvciBlYWNoIHBpZWNlIG9mIGluZm9ybWF0aW9uIGluZGl2aWR1YWxseSwgdGhlcmUgYXJlIHRpbWVzIHdoZXJlIGEgc2VnbWVudCBjb3VsZCBlbmRcblx0XHQvLyBpbiB0aGUgbWlkZGxlIG9mIHRoaXMgcG9sbGluZy4gVGhpcyBtZWFucyBzb21lIG9mIHRoZSBpbmZvcm1hdGlvbiB3aWxsIGJlIGZyb20gdGhlIG9sZCBzZWdtZW50LCBhbmQgc29tZSB3aWxsXG5cdFx0Ly8gYmUgZnJvbSB0aGUgbmV3IG9uZS4gRm9yIG5vdywgdG8gZml4IHRoaXMgd2UnbGwganVzdCBza2lwIG92ZXIgdGhlIHVwZGF0ZSBhbmQgZ3JhYiB0aGUgbmV4dCBvbmUgaW4gdGhlc2UgY2FzZXMuXG5cdFx0aWYgKHNlZ21lbnQuZHVyYXRpb24udGltZSA9PT0gMCkge1xuXHRcdFx0c2VnbWVudC5lcnJvciA9IHRydWVcblx0XHRcdHNlZ21lbnQuc2tpcFVwZGF0ZSA9IHRydWVcblx0XHRcdHJldHVybiBzZWdtZW50XG5cdFx0fVxuXG5cdFx0c2VnbWVudC5pc0dvbGQgPSB0aW1lRGlmZihuZXh0VGltZS5iZXN0UG9zc2libGVUaW1lLCBwcmV2VGltZS5iZXN0UG9zc2libGVUaW1lKS50aW1lIDwgMFxuXHR9IGVsc2UgaWYgKHBhcnNlSW50KG5leHRUaW1lLnNwbGl0SW5kZXgpIDwgcHJldlRpbWUuc3BsaXRJbmRleCkge1xuXHRcdHNlZ21lbnQuaXNVbmRvbmUgPSB0cnVlXG5cdH0gZWxzZSB7XG5cdFx0c2VnbWVudC5kdXJhdGlvbiA9IHRpbWVEaWZmKG5leHRUaW1lLmN1cnJlbnRUaW1lLCBwcmV2VGltZS5wcmV2aW91c1NwbGl0VGltZSB8fCAnMCcpXG5cdH1cblxuXHQvLyBVbmRvbmUgc3BsaXRzIC0gdXNlZCB0byBjYW5jZWwgYW5pbWF0aW9ucyBpbiBwcm9ncmVzc1xuXG5cdHJldHVybiBzZWdtZW50XG59XG5cblxuLy8gVE9ETzogU3BsaXQgdGhlc2UgdXRpbGl0eSBmdW5jdGlvbnMgaW50byBhIFwiVGltZVwiIGNsYXNzLCBwb3RlbnRpYWxseSBjb252ZXJ0aW5nIGFsbCB0aW1lIHN0cmluZ3MgaW50byBUaW1lIG9iamVjdHNcbi8vICAgICAgIHNvIHRoYXQgdGhlIGNvbXBhcmF0b3JzIGNhbiBiZSBvdmVycmlkZGVuIGFzIHdlbGwgKHZpYSAudmFsdWVPZigpKVxuZnVuY3Rpb24gdGltZVN1bSh0MSwgdDIpIHtcblx0Y29uc3QgdGltZSA9IF9jb252ZXJ0VGltZVRvTXModDEpICsgX2NvbnZlcnRUaW1lVG9Ncyh0Milcblx0cmV0dXJuIHsgdGltZSwgdGV4dDogX2NvbnZlcnRNc1RvVGltZSh0aW1lKSB9XG59XG5cbmZ1bmN0aW9uIHRpbWVEaWZmKHQxLCB0Mikge1xuXHRjb25zdCB0aW1lID0gX2NvbnZlcnRUaW1lVG9Ncyh0MSkgLSBfY29udmVydFRpbWVUb01zKHQyKVxuXHRyZXR1cm4geyB0aW1lLCB0ZXh0OiBfY29udmVydE1zVG9UaW1lKHRpbWUpIH1cbn1cblxuZnVuY3Rpb24gX2NvbnZlcnRUaW1lVG9Ncyh0aW1lKSB7XG5cdGlmIChwYXJzZUludCh0aW1lLmNoYXJBdCgwKSkgPT09IE5hTikge1xuXHRcdHRpbWUgPSB0aW1lLnNsaWNlKDEpXG5cdH1cblxuXHR0aW1lID0gdGltZS5zcGxpdCgnOicpLnJldmVyc2UoKVxuXG5cdGlmICh0aW1lLmxlbmd0aCA8PSAwIHx8IHRpbWUubGVuZ3RoID4gMykge1xuXHRcdHRocm93IG5ldyBFcnJvcignY29udmVydFRpbWVUb1NlY29uZHM6IFVucmVjb2duaXplZCB0aW1lIHN0cmluZyEnKVxuXHR9XG5cblx0cmV0dXJuIHRpbWUucmVkdWNlKChzdW0sIG5leHQsIGluZGV4KSA9PiBzdW0gKyBuZXh0ICogTWF0aC5wb3coNjAsIGluZGV4KSAqIDEwMDAsIDApXG59XG5cbmZ1bmN0aW9uIF9jb252ZXJ0TXNUb1RpbWUobXMpIHtcblx0Y29uc3QgbmVnID0gbXMgPCAwID8gJy0nIDogJydcblx0bGV0IGhycyA9IDAsIG1pbnMgPSAwLCBzZWNzID0gTWF0aC5hYnMoTWF0aC5mbG9vcihtcyAvIDEwMDApKVxuXHRtcyA9IE1hdGguYWJzKChtcyAlIDEwMDApIC8gMTApXG5cblx0aWYgKHNlY3MgPj0gNjAgKiA2MCkge1xuXHRcdGhycyA9IE1hdGguZmxvb3Ioc2VjcyAvICg2MCAqIDYwKSlcblx0XHRzZWNzIC09IGhycyAqIDYwICogNjBcblx0XHRocnMgPSBocnMgPCAxMCA/ICcwJyArIGhycyA6IGhyc1xuXHR9XG5cdGlmIChzZWNzID49IDYwKSB7XG5cdFx0bWlucyA9IE1hdGguZmxvb3Ioc2VjcyAvIDYwKVxuXHRcdHNlY3MgLT0gbWlucyAqIDYwXG5cdFx0bWlucyA9IGhycyAmJiBtaW5zIDwgMTAgPyAnMCcgKyBtaW5zIDogbWluc1xuXHR9XG5cdGlmIChzZWNzIDwgMTApIHtcblx0XHRzZWNzID0gJzAnICsgc2Vjc1xuXHR9XG5cdGlmIChtcyA8IDEwKSB7XG5cdFx0bXMgPSAnMCcgKyBtc1xuXHR9XG5cblx0cmV0dXJuIGAke25lZ30ke2hycyA/IGhycyArICc6JyA6ICcnfSR7aHJzIHx8IG1pbnMgPyBtaW5zICsgJzonIDogJyd9JHtzZWNzfS4ke21zfWBcbn0iLCIvKlxyXG4gICAgbm9kZS1saXZlc3BsaXQtY2xpZW50XHJcbiAgICBEZXZlbG9wZWQgYnkgc2F0YW5jaFxyXG4qL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3NyYy9MaXZlU3BsaXRDbGllbnQnKTtcclxuIiwiY29uc3QgbmV0ID0gcmVxdWlyZSgnbmV0Jyk7XHJcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpO1xyXG5jb25zdCB7IGRlcHJlY2F0ZSB9ID0gcmVxdWlyZSgndXRpbCcpO1xyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTtcclxuXHJcbi8qKlxyXG4gKiBOb2RlLmpzIGNsaWVudCBmb3IgdGhlIExpdmVTcGxpdCBTZXJ2ZXIgcnVubmluZyBpbnN0YW5jZVxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHBhcmFtIHtzdHJpbmd9IGFkZHJlc3MgLSBDb25uZWN0aW9uIGFkZHJlc3MsIGxpa2U6IDEyNy4wLjAuMToxMjM0XHJcbiAqL1xyXG5jbGFzcyBMaXZlU3BsaXRDbGllbnQgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoYWRkcmVzcykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYWRkcmVzcyAhPT0gJ3N0cmluZycpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQgdHlwZSEgSVA6UE9SVCBleHBlY3RlZC4nKTtcclxuXHJcbiAgICAgICAgYWRkcmVzcyA9IGFkZHJlc3Muc3BsaXQoJzonKTtcclxuXHJcbiAgICAgICAgaWYgKGFkZHJlc3MubGVuZ3RoICE9PSAyKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBjb25uZWN0aW9uIGRldGFpbHMhIElQOlBPUlQgZXhwZWN0ZWQuJyk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Nvbm5lY3Rpb25EZXRhaWxzID0ge1xyXG4gICAgICAgICAgICBpcDogYWRkcmVzc1swXSxcclxuICAgICAgICAgICAgcG9ydDogcGFyc2VJbnQoYWRkcmVzc1sxXSlcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnRpbWVvdXQgPSAxMDA7XHJcbiAgICAgICAgdGhpcy5fb3BlblJlcXVlc3RzID0ge307XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICAgIEFjY29yZGluZyB0bzogaHR0cHM6Ly9naXRodWIuY29tL0xpdmVTcGxpdC9MaXZlU3BsaXQuU2VydmVyL2Jsb2IvYTRhNTc3MTZkY2U5MDkzNjYwNmJmYzhmOGFjODRmNzYyMzc3M2FhNS9SRUFETUUubWQjY29tbWFuZHNcclxuXHJcbiAgICAgICAgICAgIFdoZW4gdXNpbmcgR2FtZSBUaW1lLCBpdCdzIGltcG9ydGFudCB0aGF0IHlvdSBjYWxsIFwiaW5pdGdhbWV0aW1lXCIgb25jZS4gT25jZSBcImluaXRnYW1ldGltZVwiIGlzIHVzZWQsIGFuIGFkZGl0aW9uYWwgY29tcGFyaXNvbiB3aWxsIGFwcGVhciBhbmQgeW91IGNhbiBzd2l0Y2ggdG8gaXQgdmlhIHRoZSBjb250ZXh0IG1lbnUgKENvbXBhcmUgQWdhaW5zdCA+IEdhbWUgVGltZSkuIFRoaXMgc3BlY2lhbCBjb21wYXJpc29uIHdpbGwgc2hvdyBldmVyeXRoaW5nIGJhc2VkIG9uIHRoZSBHYW1lIFRpbWUgKGV2ZXJ5IGNvbXBvbmVudCBub3cgc2hvd3MgR2FtZSBUaW1lIGJhc2VkIGluZm9ybWF0aW9uKS5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2luaXRHYW1lVGltZU9uY2UgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRQcmV2aW91c1NwbGl0bmFtZSA9IGRlcHJlY2F0ZSh0aGlzLmdldFByZXZpb3VzU3BsaXRuYW1lLCAnTWV0aG9kIFwiZ2V0UHJldmlvdXNTcGxpdG5hbWVcIiBpcyBkZXByZWNhdGVkISBQbGVhc2UsIHVzZSBcImdldFByZXZpb3VzU3BsaXROYW1lXCIgKGNhcGl0YWwgbGV0dGVyIFwiTlwiKSBpbnN0ZWFkLicpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm1zIGNvbm5lY3Rpb24gYXR0ZW1wdCB0byB0aGUgTGl2ZVNwbGl0IFNlcnZlciBpbnN0YW5jZS5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb25uZWN0aW9uIHJlc3VsdCBvciBlcnJvci5cclxuICAgICAqL1xyXG4gICAgY29ubmVjdCgpIHtcclxuICAgICAgICB0aGlzLl9zb2NrZXQgPSBuZXcgbmV0LlNvY2tldCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9zb2NrZXQuY29ubmVjdCh0aGlzLl9jb25uZWN0aW9uRGV0YWlscy5wb3J0LCB0aGlzLl9jb25uZWN0aW9uRGV0YWlscy5pcCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY29ubmVjdGVkJyk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMuX2Nvbm5lY3RlZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc29ja2V0Lm9uKCdkYXRhJywgKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIGNhdGNoIGVkZ2UgY2FzZXMgd2hlcmUgbXVsdGlwbGUgbWVzc2FnZXMgYXJlIHNlbnQgYnkgdGhlIHNlcnZlclxyXG4gICAgICAgICAgICAgICAgLy8gc28gZmFzdCB0aGF0IHRoaXMgbGlzdGVuZXIgb25seSBmaXJlcyBvbmNlIHdpdGggYWxsIG9mIHRoZW0gKGNvbmNhdGVuYXRlZCkuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGFsbG93cyBmb3IgcG9sbGluZyBhdCBhIG11Y2ggZmFzdGVyIHJhdGUgd2l0aCBmZXdlciBlcnJvcnMuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGRhdGEudG9TdHJpbmcoJ3V0Zi04Jykuc3BsaXQoJ1xcclxcbicpLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2gobWVzc2FnZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkYXRhJywgSlNPTi5wYXJzZShtZXNzYWdlKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zb2NrZXQub24oJ2Vycm9yJywgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zb2NrZXQub24oJ2Nsb3NlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY29ubmVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Rpc2Nvbm5lY3RlZCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc2Nvbm5lY3QgY2xpZW50IGZyb20gdGhlIHNldmVyLlxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IERpc2Nvbm5lY3Rpb24gcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBkaXNjb25uZWN0KCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fY29ubmVjdGVkKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc29ja2V0LmRlc3Ryb3koKTtcclxuICAgICAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENsaWVudCBjb25uZWN0aW9uIHN0YXR1cy5cclxuICAgICAqIEB0eXBlIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBnZXQgY29ubmVjdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25uZWN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZW5kIGNvbW1hbmQgdG8gdGhlIExpdmVTcGxpdCBTZXJ2ZXIgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29tbWFuZCAtIEV4aXN0aW5nIExpdmVTcGxpdCBTZXJ2ZXIgY29tbWFuZCB3aXRob3V0IGxpbmVicmVha3MuXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW2RhdGFdIC0gQWRkaXRpb25hbCBkYXRhIHRvIGJlIHNlbnQgd2l0aCB0aGUgY29tbWFuZC5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSAtIENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgc2VuZChjb21tYW5kLCBkYXRhKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9jb25uZWN0ZWQpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IG11c3QgYmUgY29ubmVjdGVkIHRvIHRoZSBzZXJ2ZXIhJyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgY29tbWFuZCAhPT0gJ3N0cmluZycpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU3RyaW5nIGV4cGVjdGVkIScpO1xyXG5cclxuICAgICAgICB0aGlzLl9jaGVja0Rpc2FsbG93ZWRTeW1ib2xzKGNvbW1hbmQpO1xyXG5cclxuICAgICAgICBjb25zdCBub25jZSA9IGNyeXB0by5yYW5kb21VVUlEKCk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHsgY29tbWFuZCwgZGF0YSwgbm9uY2UgfTtcclxuICAgICAgICB0aGlzLl9zb2NrZXQud3JpdGUoYCR7SlNPTi5zdHJpbmdpZnkocmVxdWVzdCl9XFxyXFxuYCk7XHJcbiAgICAgICAgdGhpcy5fb3BlblJlcXVlc3RzW25vbmNlXSA9IHJlcXVlc3Q7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl93YWl0Rm9yUmVzcG9uc2UocmVxdWVzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3dhaXRGb3JSZXNwb25zZShyZXF1ZXN0KSB7XHJcbiAgICAgICAgbGV0IGxpc3RlbmVyID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlUmVjaWV2ZWQgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBsaXN0ZW5lciA9IChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5ub25jZSA9PT0gcmVxdWVzdC5ub25jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub2ZmKCdkYXRhJywgbGlzdGVuZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9vcGVuUmVxdWVzdHNbcmVxdWVzdC5ub25jZV07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oJ2RhdGEnLCBsaXN0ZW5lcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGltZW91dCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoJ2RhdGEnLCBsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fb3BlblJlcXVlc3RzW3JlcXVlc3Qubm9uY2VdO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfSwgdGhpcy50aW1lb3V0KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbcmVzcG9uc2VSZWNpZXZlZCwgcmVzcG9uc2VUaW1lb3V0XSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrRGlzYWxsb3dlZFN5bWJvbHMoc3RyKSB7XHJcbiAgICAgICAgaWYgKHN0ci5pbmRleE9mKCdcXHJcXG4nKSAhPT0gLTEpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbmV3bGluZSBzeW1ib2xzIGFsbG93ZWQhJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCB0aW1lclxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgc3RhcnRUaW1lcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdzdGFydHRpbWVyJyk7ICBcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IG9yIHNwbGl0XHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBzdGFydE9yU3BsaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnc3RhcnRvcnNwbGl0Jyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU3BsaXRcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIHNwbGl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ3NwbGl0Jyk7ICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5zcGxpdFxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgdW5zcGxpdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCd1bnNwbGl0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTa2lwIHNwbGl0XHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBza2lwU3BsaXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnc2tpcHNwbGl0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXVzZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgcGF1c2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgncGF1c2UnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc3VtZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ3Jlc3VtZScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIFJlc2V0XHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdyZXNldCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdCBnYW1lIHRpbWUuIENvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UgYWNjb3JkaW5nIHRvIExpdmVTcGxpdCBTZXJ2ZXIgZG9jdW1lbnRhdGlvbi5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGluaXRHYW1lVGltZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5faW5pdEdhbWVUaW1lT25jZSkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2luaXRHYW1lVGltZU9uY2UgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ2luaXRnYW1ldGltZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IGdhbWUgdGltZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpbWUgLSBHYW1lIHRpbWVcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIHNldEdhbWVUaW1lKHRpbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdzZXRnYW1ldGltZScsIHsgdGltZSB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgbG9hZGluZyB0aW1lc1xyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpbWUgLSBHYW1lIHRpbWVcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIHNldExvYWRpbmdUaW1lcyh0aW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnc2V0bG9hZGluZ3RpbWVzJywgeyB0aW1lIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGF1c2UgZ2FtZSB0aW1lXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBwYXVzZUdhbWVUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ3BhdXNlZ2FtZXRpbWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVucGF1c2UgZ2FtZSB0aW1lXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICB1bnBhdXNlR2FtZVRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgndW5wYXVzZWdhbWV0aW1lJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogU2V0IGNvbXBhcmlzb25cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb21wYXJpc29uIC0gQ29tcGFyaXNvblxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgc2V0Q29tcGFyaXNvbihjb21wYXJpc29uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnc2V0Y29tcGFyaXNvbicsIHsgY29tcGFyaXNvbiB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBkZWx0YVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjb21wYXJpc29uXSAtIENvbXBhcmlzb25cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGdldERlbHRhKGNvbXBhcmlzb24gPSAnJykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ2dldGRlbHRhJywgeyBjb21wYXJpc29uIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBsYXN0IHNwbGl0IHRpbWVcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGdldExhc3RTcGxpdFRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnZ2V0bGFzdHNwbGl0dGltZScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjb21wYXJpc29uIHNwbGl0IHRpbWVcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGdldENvbXBhcmlzb25TcGxpdFRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnZ2V0Y29tcGFyaXNvbnNwbGl0dGltZScpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBjdXJyZW50IHRpbWVcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ2dldGN1cnJlbnR0aW1lJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgZmluYWwgdGltZVxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtjb21wYXJpc29uXSAtIENvbXBhcmlzb25cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGdldEZpbmFsVGltZShjb21wYXJpc29uID0gJycpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdnZXRmaW5hbHRpbWUnLCB7IGNvbXBhcmlzb24gfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHByZWRpY3RlZCB0aW1lXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvbXBhcmlzb25dIC0gQ29tcGFyaXNvblxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJlZGljdGVkVGltZShjb21wYXJpc29uID0gJycpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdnZXRwcmVkaWN0ZWR0aW1lJywgeyBjb21wYXJpc29uIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEdldCBiZXN0IHBzc2libGUgdGltZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgZ2V0QmVzdFBvc3NpYmxlVGltZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kKCdnZXRiZXN0cG9zc2libGV0aW1lJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogR2V0IHNwbGl0IGluZGV4XHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBnZXRTcGxpdEluZGV4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ2dldHNwbGl0aW5kZXgnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgY3VycmVudCBzcGxpdCBuYW1lXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQ29tbWFuZCByZXN1bHQgb3IgbnVsbCBvbiB0aW1lb3V0LlxyXG4gICAgICovXHJcbiAgICBnZXRDdXJyZW50U3BsaXROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ2dldGN1cnJlbnRzcGxpdG5hbWUnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcHJldmlvdXMgc3BsaXQgbmFtZVxyXG4gICAgICogQHJldHVybnMge1Byb21pc2V9IENvbW1hbmQgcmVzdWx0IG9yIG51bGwgb24gdGltZW91dC5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJldmlvdXNTcGxpdE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZCgnZ2V0cHJldmlvdXNzcGxpdG5hbWUnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQcmV2aW91c1NwbGl0bmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRQcmV2aW91c1NwbGl0TmFtZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGN1cnJlbnQgdGltZXIgcGhhc2VcclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kIHJlc3VsdCBvciBudWxsIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGdldEN1cnJlbnRUaW1lclBoYXNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmQoJ2dldGN1cnJlbnR0aW1lcnBoYXNlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYWxsIGF2YWlsYWJsZSBpbmZvcm1hdGlvbi4gU3ludGhldGljIG1ldGhvZCB0aGF0IGNhbGxzIGV2ZXJ5IHNlcnZlciBnZXR0ZXIgY29tbWFuZCBpZiBwb3NzaWJsZS5cclxuICAgICAqIEByZXR1cm5zIHtQcm9taXNlfSBDb21tYW5kcyBleGVjdXRpb24gcmVzdWx0IG9yIGZhbHNlIG9uIHRpbWVvdXQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEFsbCgpIHtcclxuICAgICAgIGNvbnN0IG91dHB1dCA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBtZXRob2Qgb2YgWydnZXRDdXJyZW50VGltZXJQaGFzZScsICdnZXREZWx0YScsICdnZXRMYXN0U3BsaXRUaW1lJywgJ2dldENvbXBhcmlzb25TcGxpdFRpbWUnLCAnZ2V0Q3VycmVudFRpbWUnLCAnZ2V0RmluYWxUaW1lJywgJ2dldFByZWRpY3RlZFRpbWUnLCAnZ2V0QmVzdFBvc3NpYmxlVGltZScsICdnZXRTcGxpdEluZGV4JywgJ2dldEN1cnJlbnRTcGxpdE5hbWUnLCAnZ2V0UHJldmlvdXNTcGxpdE5hbWUnXSkge1xyXG4gICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzW21ldGhvZF0oKTtcclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihvdXRwdXQsIHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBMaXZlU3BsaXRDbGllbnQ7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNyeXB0b1wiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJldmVudHNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibmV0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInV0aWxcIik7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygzODcpO1xuIl0sIm5hbWVzIjpbIkxpdmVTcGxpdENsaWVudCIsInRpbWVEaWZmIiwidDEiLCJ0MiIsInRpbWUiLCJfY29udmVydFRpbWVUb01zIiwidGV4dCIsIl9jb252ZXJ0TXNUb1RpbWUiLCJOYU4iLCJwYXJzZUludCIsImNoYXJBdCIsInNsaWNlIiwic3BsaXQiLCJyZXZlcnNlIiwibGVuZ3RoIiwiRXJyb3IiLCJyZWR1Y2UiLCJzdW0iLCJuZXh0IiwiaW5kZXgiLCJNYXRoIiwicG93IiwibXMiLCJuZWciLCJocnMiLCJtaW5zIiwic2VjcyIsImFicyIsImZsb29yIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5vZGVjZyIsInJMaXZlc3BsaXQiLCJSZXBsaWNhbnQiLCJjbGllbnQiLCJidW5kbGVDb25maWciLCJ1cmwiLCJwb3J0IiwidGltZXJIYW5kbGUiLCJpbmZvRGlzcGxheUNoYW5nZUhhbmRsZSIsImFzeW5jIiwidXBkYXRlVGltZXIiLCJnZXRBbGwiLCJlcnIiLCJsb2ciLCJlcnJvciIsInNlZ21lbnRJbmZvIiwicHJldlRpbWUiLCJuZXh0VGltZSIsInNlZ21lbnQiLCJjdXJyZW50VGltZSIsInNraXBVcGRhdGUiLCJpc0NvbXBsZXRlIiwic3BsaXRJbmRleCIsInByZXZpb3VzU3BsaXRUaW1lIiwiZHVyYXRpb24iLCJpc0dvbGQiLCJiZXN0UG9zc2libGVUaW1lIiwiaXNVbmRvbmUiLCJkZXRlY3RTcGxpdCIsInZhbHVlIiwidGltZXIiLCJzZW5kTWVzc2FnZSIsImNvbm5lY3Rpb24iLCJzdGF0dXMiLCJ1bmRlZmluZWQiLCJ0aW1lb3V0IiwicG9sbGluZ0ludGVydmFsIiwib24iLCJpbmZvIiwic2V0SW50ZXJ2YWwiLCJsaXN0ZW5Gb3IiLCJfIiwiYWNrIiwiY29ubmVjdCIsImNsZWFySW50ZXJ2YWwiLCJkaXNjb25uZWN0IiwibmV0IiwiRXZlbnRFbWl0dGVyIiwiZGVwcmVjYXRlIiwiY3J5cHRvIiwiY29uc3RydWN0b3IiLCJhZGRyZXNzIiwic3VwZXIiLCJUeXBlRXJyb3IiLCJ0aGlzIiwiX2Nvbm5lY3Rpb25EZXRhaWxzIiwiaXAiLCJfY29ubmVjdGVkIiwiX29wZW5SZXF1ZXN0cyIsIl9pbml0R2FtZVRpbWVPbmNlIiwiZ2V0UHJldmlvdXNTcGxpdG5hbWUiLCJfc29ja2V0IiwiU29ja2V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJlbWl0IiwiZGF0YSIsInRvU3RyaW5nIiwiZm9yRWFjaCIsIm1lc3NhZ2UiLCJKU09OIiwicGFyc2UiLCJkZXN0cm95IiwiY29ubmVjdGVkIiwic2VuZCIsImNvbW1hbmQiLCJfY2hlY2tEaXNhbGxvd2VkU3ltYm9scyIsIm5vbmNlIiwicmFuZG9tVVVJRCIsInJlcXVlc3QiLCJ3cml0ZSIsInN0cmluZ2lmeSIsIl93YWl0Rm9yUmVzcG9uc2UiLCJsaXN0ZW5lciIsInJlc3BvbnNlUmVjaWV2ZWQiLCJvZmYiLCJyZXNwb25zZVRpbWVvdXQiLCJzZXRUaW1lb3V0IiwicmFjZSIsInN0ciIsImluZGV4T2YiLCJzdGFydFRpbWVyIiwic3RhcnRPclNwbGl0IiwidW5zcGxpdCIsInNraXBTcGxpdCIsInBhdXNlIiwicmVzdW1lIiwicmVzZXQiLCJpbml0R2FtZVRpbWUiLCJzZXRHYW1lVGltZSIsInNldExvYWRpbmdUaW1lcyIsInBhdXNlR2FtZVRpbWUiLCJ1bnBhdXNlR2FtZVRpbWUiLCJzZXRDb21wYXJpc29uIiwiY29tcGFyaXNvbiIsImdldERlbHRhIiwiZ2V0TGFzdFNwbGl0VGltZSIsImdldENvbXBhcmlzb25TcGxpdFRpbWUiLCJnZXRDdXJyZW50VGltZSIsImdldEZpbmFsVGltZSIsImdldFByZWRpY3RlZFRpbWUiLCJnZXRCZXN0UG9zc2libGVUaW1lIiwiZ2V0U3BsaXRJbmRleCIsImdldEN1cnJlbnRTcGxpdE5hbWUiLCJnZXRQcmV2aW91c1NwbGl0TmFtZSIsImdldEN1cnJlbnRUaW1lclBoYXNlIiwib3V0cHV0IiwibWV0aG9kIiwicmVzcG9uc2UiLCJPYmplY3QiLCJhc3NpZ24iLCJyZXF1aXJlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iXSwic291cmNlUm9vdCI6IiJ9