<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<style>
		body {
			font-family: sans-serif;
		}

		.monospace {
			font-family: monospace;
		}

		h2 {
			border-bottom: 1px solid rgba(0, 0, 0, 0.205);
		}

		label {
			font-weight: bold;
		}
	</style>
</head>
<body>
	<p id="connection-status"></p>

	<div id="timer-info">
		<h2>Timer Info</h2>
		<label>Current Timer Phase: </label><span id="currentTimerPhase"></span><br />
		<label>Total Delta: </label><span id="delta"></span><br />
		<label>Last Split Time: </label><span id="lastSplitTime"></span><br />
		<label>Comparison Split Time: </label><span id="comparisonSplitTime"></span><br />
		<label>Current Time: </label><span id="currentTime"></span><br />
		<label>Final Time: </label><span id="finalTime"></span><br />
		<label>PredictedTime: </label><span id="predictedTime"></span><br />
		<label>BestPossibleTime: </label><span id="bestPossibleTime"></span><br />
		<label>Split Index: </label><span id="splitIndex"></span><br />
		<label>Current Split Name: </label><span id="currentSplitName"></span><br />
		<label>Previous Split Name: </label><span id="previousSplitName"></span><br />
	</div>

	<script>
		const rLivesplit = nodecg.Replicant('livesplit')

		rLivesplit.on('change', (newValue, oldValue) => {
			const connStatus = newValue.connection.status
			document.getElementById('connection-status').textContent = `${connStatus.charAt(0).toUpperCase()}${connStatus.slice(1)} ${connStatus === 'connected' ? 'to' : 'from'} LiveSplit`

			if (newValue.timer) {
				Object.keys(newValue.timer).forEach( key => {
					document.getElementById(key).textContent = newValue.timer[key]
				})
				document.getElementById('timer-info').style.display = 'block'
			} else {
				document.getElementById('timer-info').style.display = 'none'
			}
		})
	</script>
</body>
</html>
